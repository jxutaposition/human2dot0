<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Human2.0 — The Agent Marketplace</title>
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
      color: #1a1a1a;
      background: #fff;
      line-height: 1.6;
    }

    a { color: inherit; text-decoration: none; }

    /* Nav */
    nav {
      max-width: 800px;
      margin: 0 auto;
      padding: 24px 20px;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    .nav-brand {
      font-weight: 700;
      font-size: 1.2rem;
      letter-spacing: -0.5px;
    }
    .nav-links a {
      font-size: 0.95rem;
      color: #555;
      margin-left: 24px;
      transition: color 0.15s;
    }
    .nav-links a:hover { color: #1a1a1a; }
    .nav-links {
      display: flex;
      align-items: center;
    }
    .btn-google {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      margin-left: 24px;
      padding: 8px 16px;
      border: 1px solid #ddd;
      border-radius: 6px;
      background: #fff;
      font-size: 0.85rem;
      font-weight: 600;
      color: #1a1a1a;
      cursor: pointer;
      font-family: inherit;
      transition: background 0.15s, border-color 0.15s;
      white-space: nowrap;
    }
    .btn-google:hover { background: #f5f5f5; border-color: #bbb; }
    .btn-google svg { flex-shrink: 0; }
    .user-info {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      margin-left: 24px;
      font-size: 0.85rem;
      font-weight: 600;
      color: #1a1a1a;
    }
    .user-info img {
      width: 28px;
      height: 28px;
      border-radius: 50%;
    }

    /* Sections */
    .section {
      max-width: 800px;
      margin: 0 auto;
      padding: 48px 20px;
    }

    /* Hero */
    .hero {
      text-align: center;
      padding: 72px 20px 48px;
    }
    .hero h1 {
      font-size: 2.4rem;
      font-weight: 800;
      letter-spacing: -1px;
      margin-bottom: 16px;
      line-height: 1.15;
    }
    .hero p {
      font-size: 1.1rem;
      color: #555;
      max-width: 560px;
      margin: 0 auto 32px;
    }
    .search-bar {
      display: flex;
      max-width: 480px;
      margin: 0 auto;
      border: 1px solid #ddd;
      border-radius: 8px;
      overflow: hidden;
    }
    .search-input {
      flex: 1;
      padding: 12px 16px;
      border: none;
      font-size: 0.95rem;
      outline: none;
      font-family: inherit;
    }
    .search-btn {
      padding: 12px 24px;
      background: #1a1a1a;
      color: #fff;
      border: none;
      font-size: 0.95rem;
      font-weight: 600;
      cursor: pointer;
      font-family: inherit;
      transition: background 0.15s;
    }
    .search-btn:hover { background: #333; }
    .btn {
      display: inline-block;
      padding: 12px 28px;
      border-radius: 8px;
      font-size: 0.95rem;
      font-weight: 600;
      cursor: pointer;
      transition: background 0.15s, transform 0.1s;
      border: none;
    }
    .btn:hover { transform: translateY(-1px); }
    .btn-primary { background: #1a1a1a; color: #fff; }
    .btn-primary:hover { background: #333; }
    .btn-secondary { background: #f0f0f0; color: #1a1a1a; }
    .btn-secondary:hover { background: #e4e4e4; }

    /* Stats bar */
    .stats-bar {
      display: flex;
      justify-content: center;
      gap: 48px;
      padding: 32px 20px;
      border-top: 1px solid #eee;
      border-bottom: 1px solid #eee;
      max-width: 800px;
      margin: 0 auto;
      flex-wrap: wrap;
    }
    .stat { text-align: center; }
    .stat-value {
      font-size: 1.3rem;
      font-weight: 700;
      margin-bottom: 4px;
    }
    .stat-label {
      font-size: 0.85rem;
      color: #777;
    }

    /* Section headers */
    .section-title {
      font-size: 1.6rem;
      font-weight: 700;
      margin-bottom: 8px;
      letter-spacing: -0.5px;
    }
    .section-subtitle {
      color: #555;
      margin-bottom: 32px;
      font-size: 1rem;
    }

    /* Card grid */
    .card-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 16px;
    }
    @media (max-width: 600px) {
      .card-grid { grid-template-columns: 1fr; }
    }

    .card {
      background: #f9f9f9;
      border: 1px solid #eee;
      border-radius: 12px;
      padding: 24px;
    }
    .card-icon {
      font-size: 1.5rem;
      margin-bottom: 12px;
    }
    .card h3 {
      font-size: 1.05rem;
      font-weight: 700;
      margin-bottom: 8px;
    }
    .card p {
      font-size: 0.9rem;
      color: #555;
      line-height: 1.5;
    }

    /* Agent cards */
    .agent-card {
      background: #f9f9f9;
      border: 1px solid #eee;
      border-radius: 12px;
      padding: 24px;
    }
    .agent-card h3 {
      font-size: 1.05rem;
      font-weight: 700;
      margin-bottom: 6px;
    }
    .agent-card p {
      font-size: 0.9rem;
      color: #555;
      margin-bottom: 12px;
      line-height: 1.5;
    }
    .tags {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
    }
    .tag {
      display: inline-block;
      padding: 4px 12px;
      border-radius: 20px;
      font-size: 0.78rem;
      font-weight: 600;
    }
    .tag-blue { background: #e8f0fe; color: #1a56db; }
    .tag-green { background: #e6f4ea; color: #137333; }
    .tag-purple { background: #f3e8fd; color: #7c3aed; }
    .tag-orange { background: #fef3e2; color: #c2410c; }
    .tag-pink { background: #fce8f3; color: #be185d; }
    .tag-teal { background: #e0f7fa; color: #00796b; }

    /* Steps */
    .steps {
      display: flex;
      gap: 24px;
      flex-wrap: wrap;
    }
    .step {
      flex: 1;
      min-width: 200px;
      text-align: center;
    }
    .step-number {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: #1a1a1a;
      color: #fff;
      font-weight: 700;
      font-size: 1rem;
      margin-bottom: 12px;
    }
    .step h3 {
      font-size: 1.05rem;
      font-weight: 700;
      margin-bottom: 6px;
    }
    .step p {
      font-size: 0.9rem;
      color: #555;
    }

    /* Section header row */
    .section-header-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    .btn-linkedin {
      background: #0a66c2;
      color: #fff;
      padding: 8px 20px;
      border-radius: 8px;
      font-size: 0.85rem;
      font-weight: 600;
    }
    .btn-linkedin:hover { background: #004182; }

    /* People list */
    .people-list {
      display: flex;
      flex-direction: column;
    }
    .person-row {
      display: flex;
      align-items: center;
      padding: 16px 0;
      border-bottom: 1px solid #eee;
      gap: 16px;
    }
    .person-row:last-child { border-bottom: none; }
    .person-avatar {
      width: 56px;
      height: 56px;
      border-radius: 50%;
      object-fit: cover;
      flex-shrink: 0;
      background: #eee;
    }
    .avatar-initials {
      display: flex;
      align-items: center;
      justify-content: center;
      background: #0a66c2;
      color: #fff;
      font-weight: 700;
      font-size: 1rem;
      border-radius: 50%;
      width: 56px;
      height: 56px;
      flex-shrink: 0;
    }
    .person-info {
      flex: 1;
      min-width: 0;
    }
    .person-info h3 {
      font-size: 0.95rem;
      font-weight: 700;
      margin-bottom: 2px;
    }
    .person-info .person-title {
      font-size: 0.85rem;
      color: #555;
      line-height: 1.4;
    }
    .btn-message {
      padding: 6px 16px;
      border: 1px solid #0a66c2;
      border-radius: 20px;
      color: #0a66c2;
      font-size: 0.82rem;
      font-weight: 600;
      background: #fff;
      white-space: nowrap;
      cursor: pointer;
      transition: background 0.15s;
    }
    .btn-message:hover {
      background: #e8f0fe;
    }

    /* Network CTA */
    .network-cta {
      text-align: center;
      padding: 32px 0 8px;
    }
    .network-cta-sub {
      font-size: 0.85rem;
      color: #777;
      margin-top: 10px;
    }
    .btn-linkedin-oauth {
      display: inline-flex;
      align-items: center;
      gap: 10px;
      padding: 12px 28px;
      background: #0a66c2;
      color: #fff;
      border: none;
      border-radius: 8px;
      font-size: 0.95rem;
      font-weight: 600;
      cursor: pointer;
      font-family: inherit;
      transition: background 0.15s, transform 0.1s;
    }
    .btn-linkedin-oauth:hover { background: #004182; transform: translateY(-1px); }
    .btn-upload-csv {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 12px 28px;
      background: #16a34a;
      color: #fff;
      border: none;
      border-radius: 8px;
      font-size: 0.95rem;
      font-weight: 600;
      cursor: pointer;
      font-family: inherit;
      transition: background 0.15s, transform 0.1s;
    }
    .btn-upload-csv:hover { background: #15803d; transform: translateY(-1px); }
    .download-step {
      display: inline-block;
      margin-top: 12px;
      font-size: 0.85rem;
      color: #0a66c2;
      font-weight: 600;
    }
    .download-step:hover { text-decoration: underline; }

    /* Footer */
    footer {
      border-top: 1px solid #eee;
      max-width: 800px;
      margin: 48px auto 0;
      padding: 40px 20px;
    }
    .footer-grid {
      display: flex;
      justify-content: space-between;
      gap: 40px;
      flex-wrap: wrap;
      margin-bottom: 32px;
    }
    .footer-col h4 {
      font-size: 0.85rem;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 12px;
      color: #999;
    }
    .footer-col a {
      display: block;
      font-size: 0.9rem;
      color: #555;
      margin-bottom: 8px;
    }
    .footer-col a:hover { color: #1a1a1a; }
    .footer-bottom {
      font-size: 0.82rem;
      color: #999;
    }
  </style>
</head>
<body>

  <nav>
    <div class="nav-brand">Human2.0</div>
    <div class="nav-links">
      <a href="about.html">About</a>
      <a href="pilot.html">Pilot</a>
      <button id="google-signin-btn" class="btn-google">
        <svg width="18" height="18" viewBox="0 0 48 48"><path fill="#EA4335" d="M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z"/><path fill="#4285F4" d="M46.98 24.55c0-1.57-.15-3.09-.38-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.51-4.18 7.09-10.36 7.09-17.65z"/><path fill="#FBBC05" d="M10.53 28.59a14.5 14.5 0 0 1 0-9.18l-7.98-6.19a24.01 24.01 0 0 0 0 21.56l7.98-6.19z"/><path fill="#34A853" d="M24 48c6.48 0 11.93-2.13 15.89-5.81l-7.73-6c-2.15 1.45-4.92 2.3-8.16 2.3-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z"/></svg>
        Start Free with Google
      </button>
      <div id="user-info" class="user-info" style="display:none;">
        <img id="user-avatar" src="" alt="" referrerpolicy="no-referrer">
        <span id="user-name"></span>
      </div>
    </div>
  </nav>

  <!-- Hero -->
  <div class="hero section">
  <h1>Your Dream Team Minus the Big Costs</h1>
    <p>Simple subscriptions to custom AI agents built and owned by the best real person for the job.</p>
    <div class="search-bar">
      <input type="text" class="search-input" placeholder="Describe the skill or expertise you need...">
      <button class="search-btn">Search</button>
    </div>
  </div>

  <!-- Stats Bar -->
  <div class="stats-bar">
    <div class="stat">
      <div class="stat-value">Licenced Service</div>
      <div class="stat-label">Swap retainers for half the cost</div>
    </div>
    <div class="stat">
      <div class="stat-value">100% Custom Solution</div>
      <div class="stat-label">Accumulative knowledge</div>
    </div>
    <div class="stat">
      <div class="stat-value">Builder-Owned</div>
      <div class="stat-label">Decentralized</div>
    </div>
  </div>

  <!-- People / Connections -->
  <div class="section">
    <div class="section-header-row">
      <h2 class="section-title">Top Agents</h2>
    </div>
    <p class="section-subtitle">World-class expertise, available on demand.</p>
    <div class="people-list">
      <div class="person-row">
        <img class="person-avatar" src="https://upload.wikimedia.org/wikipedia/commons/thumb/d/d6/Tom_Cruise_2014_by_Glenn_Francis.jpg/440px-Tom_Cruise_2014_by_Glenn_Francis.jpg" alt="Tom Cruise">
        <div class="person-info">
          <h3>Tom Cruise</h3>
          <div class="person-title">Actor &amp; Producer<br>Your Ambassador &mdash; pitches your brand with conviction and star power</div>
        </div>
        <a href="#" class="btn-message">Message Agent</a>
      </div>
      <div class="person-row">
        <img class="person-avatar" src="https://upload.wikimedia.org/wikipedia/commons/thumb/f/f8/Adrienne_Maree_Brown_2019_%28cropped%29.jpg/440px-Adrienne_Maree_Brown_2019_%28cropped%29.jpg" alt="adrienne maree brown">
        <div class="person-info">
          <h3>adrienne maree brown</h3>
          <div class="person-title">Author &amp; Facilitator<br>Your Strategist &mdash; designs community engagement and organizational culture</div>
        </div>
        <a href="#" class="btn-message">Message Agent</a>
      </div>
      <div class="person-row">
        <img class="person-avatar" src="https://upload.wikimedia.org/wikipedia/commons/thumb/5/5e/Dylan_Field_at_WIRED_25.jpg/440px-Dylan_Field_at_WIRED_25.jpg" alt="Dylan Field">
        <div class="person-info">
          <h3>Dylan Field</h3>
          <div class="person-title">Co-founder &amp; CEO, Figma<br>Your Product Designer &mdash; shapes your UX and product strategy from scratch</div>
        </div>
        <a href="#" class="btn-message">Message Agent</a>
      </div>
      <div class="person-row">
        <img class="person-avatar" src="https://upload.wikimedia.org/wikipedia/commons/thumb/5/5c/Warren_Buffett_KU_Visit.jpg/440px-Warren_Buffett_KU_Visit.jpg" alt="Warren Buffett">
        <div class="person-info">
          <h3>Warren Buffett</h3>
          <div class="person-title">Chairman &amp; CEO, Berkshire Hathaway<br>Your Financial Advisor &mdash; guides capital allocation and long-term investment decisions</div>
        </div>
        <a href="#" class="btn-message">Message Agent</a>
      </div>
      <div class="person-row">
        <img class="person-avatar" src="https://upload.wikimedia.org/wikipedia/commons/thumb/3/3a/Kim_Kardashian_2022_by_Glenn_Francis.jpg/440px-Kim_Kardashian_2022_by_Glenn_Francis.jpg" alt="Kim Kardashian">
        <div class="person-info">
          <h3>Kim Kardashian</h3>
          <div class="person-title">Founder, SKIMS &amp; Media Mogul<br>Your Brand Model &mdash; builds your social presence and consumer brand identity</div>
        </div>
        <a href="#" class="btn-message">Message Agent</a>
      </div>
      <div class="person-row">
        <img class="person-avatar" src="https://upload.wikimedia.org/wikipedia/commons/thumb/a/a5/Jensen_Huang.jpg/440px-Jensen_Huang.jpg" alt="Jensen Huang">
        <div class="person-info">
          <h3>Jensen Huang</h3>
          <div class="person-title">Founder &amp; CEO, NVIDIA<br>Your Engineer &mdash; architects your technical infrastructure and AI stack</div>
        </div>
        <a href="#" class="btn-message">Message Agent</a>
      </div>
    </div>

    <!-- Try with My Network CTA -->
    <div class="network-cta">
      <!-- Step 1: LinkedIn OAuth -->
      <div id="linkedin-step">
        <button class="btn-linkedin-oauth" onclick="startLinkedInOAuth()">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="#fff"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433a2.062 2.062 0 01-2.063-2.065 2.064 2.064 0 112.063 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg>
          Try with My Network
        </button>
        <p class="network-cta-sub">Connect LinkedIn to import your connections</p>
      </div>

      <!-- Step 2: Download + Upload (shown after OAuth) -->
      <div id="upload-step" style="display:none">
        <a href="https://www.linkedin.com/mypreferences/d/download-my-data" target="_blank" class="download-step">Step 1: Download your connections CSV from LinkedIn &rarr;</a>
        <br><br>
        <label for="csv-upload" class="btn-upload-csv">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" y1="3" x2="12" y2="15"/></svg>
          Upload Connections
        </label>
        <input type="file" id="csv-upload" accept=".csv" style="display:none">
        <p class="network-cta-sub">Upload the CSV to see your connections as agents</p>
      </div>
    </div>

    <!-- User connections rendered here -->
    <div id="my-connections" class="people-list" style="display:none"></div>
  </div>

  <!-- How It Works -->
  <div class="section" id="how">
    <h2 class="section-title">How It Works</h2>
    <p class="section-subtitle">Three steps to getting results.</p>
    <div class="steps">
      <div class="step">
        <div class="step-number">1</div>
        <h3>Find</h3>
        <p>Search the marketplace for an agent that fits your task.</p>
      </div>
      <div class="step">
        <div class="step-number">2</div>
        <h3>Deploy</h3>
        <p>Configure it with your data and launch — no code needed.</p>
      </div>
      <div class="step">
        <div class="step-number">3</div>
        <h3>Results</h3>
        <p>Get structured output you can act on immediately.</p>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer>
    <div class="footer-grid">
      <div class="footer-col">
        <h4>Human2.0</h4>
        <a href="index.html">Home</a>
        <a href="about.html">About</a>
        <a href="pilot.html">Pilot</a>
      </div>
      <div class="footer-col">
        <h4>Resources</h4>
        <a href="#">Documentation</a>
        <a href="#">For Builders</a>
      </div>
      <div class="footer-col">
        <h4>Connect</h4>
        <a href="#">Twitter</a>
        <a href="#">GitHub</a>
      </div>
    </div>
    <div class="footer-bottom">&copy; 2026 Human2.0. All rights reserved.</div>
  </footer>

  <script>
    // --- LinkedIn OAuth Config ---
    // TODO: Register a LinkedIn App at https://developer.linkedin.com and paste your Client ID here
    var LINKEDIN_CLIENT_ID = 'YOUR_LINKEDIN_CLIENT_ID';
    var REDIRECT_URI = window.location.origin + window.location.pathname;

    function startLinkedInOAuth() {
      var state = Math.random().toString(36).substring(2);
      sessionStorage.setItem('li_oauth_state', state);
      var authUrl = 'https://www.linkedin.com/oauth/v2/authorization'
        + '?response_type=code'
        + '&client_id=' + LINKEDIN_CLIENT_ID
        + '&redirect_uri=' + encodeURIComponent(REDIRECT_URI)
        + '&state=' + state
        + '&scope=openid%20profile%20email';
      window.location.href = authUrl;
    }

    // On page load: check if we're returning from LinkedIn OAuth
    (function() {
      var params = new URLSearchParams(window.location.search);
      if (params.has('code') || sessionStorage.getItem('li_connected')) {
        sessionStorage.setItem('li_connected', '1');
        // Clean the URL
        if (params.has('code')) {
          window.history.replaceState({}, '', window.location.pathname);
        }
        showUploadStep();
      }
    })();

    function showUploadStep() {
      document.getElementById('linkedin-step').style.display = 'none';
      document.getElementById('upload-step').style.display = 'block';
    }

    document.getElementById('csv-upload').addEventListener('change', function(e) {
      var file = e.target.files[0];
      if (!file) return;

      var reader = new FileReader();
      reader.onload = function(ev) {
        var text = ev.target.result;
        var lines = text.split('\n');
        var headerLine = -1;

        // Find the header row (LinkedIn CSVs sometimes have notes before headers)
        for (var i = 0; i < lines.length; i++) {
          var lower = lines[i].toLowerCase();
          if (lower.indexOf('first name') !== -1 || lower.indexOf('first_name') !== -1 || lower.indexOf('firstname') !== -1) {
            headerLine = i;
            break;
          }
        }
        if (headerLine === -1) headerLine = 0;

        var headers = parseCSVLine(lines[headerLine]);
        var hMap = {};
        for (var h = 0; h < headers.length; h++) {
          hMap[headers[h].trim().toLowerCase().replace(/\s+/g, ' ')] = h;
        }

        var fnIdx = findCol(hMap, ['first name', 'first_name', 'firstname']);
        var lnIdx = findCol(hMap, ['last name', 'last_name', 'lastname']);
        var compIdx = findCol(hMap, ['company', 'organization']);
        var posIdx = findCol(hMap, ['position', 'title', 'headline']);
        var urlIdx = findCol(hMap, ['url', 'profile url', 'profile_url', 'linkedin url']);

        var people = [];
        for (var j = headerLine + 1; j < lines.length && people.length < 10; j++) {
          if (!lines[j].trim()) continue;
          var cols = parseCSVLine(lines[j]);
          var fn = cols[fnIdx] || '';
          var ln = cols[lnIdx] || '';
          var name = (fn + ' ' + ln).trim();
          if (!name) continue;
          var company = compIdx !== -1 ? (cols[compIdx] || '') : '';
          var position = posIdx !== -1 ? (cols[posIdx] || '') : '';
          var url = urlIdx !== -1 ? (cols[urlIdx] || '') : '';
          var title = position;
          if (company && position) title = position + ' at ' + company;
          else if (company) title = company;
          people.push({ name: name, title: title, url: url });
        }

        if (people.length === 0) {
          alert('No connections found in CSV. Make sure you uploaded the LinkedIn Connections export.');
          return;
        }

        var container = document.getElementById('my-connections');
        container.innerHTML = '<h3 style="font-size:1.1rem;font-weight:700;margin-bottom:8px;">My Network</h3>';
        container.style.display = 'block';

        for (var k = 0; k < people.length; k++) {
          var p = people[k];
          var initials = p.name.split(' ').map(function(w) { return w[0]; }).join('').substring(0, 2).toUpperCase();
          var row = document.createElement('div');
          row.className = 'person-row';
          row.innerHTML =
            '<div class="person-avatar avatar-initials">' + initials + '</div>' +
            '<div class="person-info">' +
              '<h3>' + escHTML(p.name) + '</h3>' +
              '<div class="person-title">' + escHTML(p.title) + '</div>' +
            '</div>' +
            '<a href="#" class="btn-message">Message Agent</a>';
          container.appendChild(row);
        }

        // Scroll to the results
        container.scrollIntoView({ behavior: 'smooth', block: 'start' });
      };
      reader.readAsText(file);
    });

    function parseCSVLine(line) {
      var result = [];
      var current = '';
      var inQuotes = false;
      for (var i = 0; i < line.length; i++) {
        var ch = line[i];
        if (inQuotes) {
          if (ch === '"' && line[i + 1] === '"') { current += '"'; i++; }
          else if (ch === '"') { inQuotes = false; }
          else { current += ch; }
        } else {
          if (ch === '"') { inQuotes = true; }
          else if (ch === ',') { result.push(current.trim()); current = ''; }
          else { current += ch; }
        }
      }
      result.push(current.trim());
      return result;
    }

    function findCol(map, names) {
      for (var i = 0; i < names.length; i++) { if (map[names[i]] !== undefined) return map[names[i]]; }
      return -1;
    }

    function escHTML(s) {
      var d = document.createElement('div');
      d.textContent = s;
      return d.innerHTML;
    }
  </script>

  <script src="https://accounts.google.com/gsi/client" async defer></script>
  <script>
    // TODO: Replace with your Google Cloud OAuth client ID
    const GOOGLE_CLIENT_ID = 'YOUR_CLIENT_ID.apps.googleusercontent.com';

    function handleCredentialResponse(response) {
      const payload = JSON.parse(atob(response.credential.split('.')[1]));
      document.getElementById('google-signin-btn').style.display = 'none';
      const userInfo = document.getElementById('user-info');
      userInfo.style.display = 'inline-flex';
      document.getElementById('user-avatar').src = payload.picture;
      document.getElementById('user-name').textContent = payload.given_name;
      sessionStorage.setItem('guser', JSON.stringify({
        name: payload.given_name,
        email: payload.email,
        picture: payload.picture,
      }));
    }

    window.addEventListener('load', () => {
      const saved = sessionStorage.getItem('guser');
      if (saved) {
        const u = JSON.parse(saved);
        document.getElementById('google-signin-btn').style.display = 'none';
        const userInfo = document.getElementById('user-info');
        userInfo.style.display = 'inline-flex';
        document.getElementById('user-avatar').src = u.picture;
        document.getElementById('user-name').textContent = u.name;
        return;
      }
      google.accounts.id.initialize({
        client_id: GOOGLE_CLIENT_ID,
        callback: handleCredentialResponse,
      });
      document.getElementById('google-signin-btn').addEventListener('click', () => {
        google.accounts.id.prompt();
      });
    });
  </script>

</body>
</html>
